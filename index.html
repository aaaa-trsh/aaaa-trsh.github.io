<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>keith b's funhouse</title>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">        
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;300;400;600;700&display=swap" rel="stylesheet">
        <script src="https://d3js.org/d3.v4.min.js"></script> 
        <script src="https://d3js.org/d3-interpolate.v1.min.js"></script> 
        <script src="./js/perlin.js"></script>
        <link rel="stylesheet" href="./assets/styles/main.css">
        <link rel="stylesheet" href="./assets/styles/widgets.css">
    </head>

    <body id="body">
        <div class="navbar-wrap">
            <div class="navbar">
                <h1 class="navbar-title">
                    keith bartlett
                    <img class="navbar-icon" src="./assets/imgs/icons/dino.png"/>
                </h1> 
                <h1 class="navbar-option" style="flex: 3"></h1>
                <h3 class="navbar-option">projects</h3>
                <h3 class="navbar-option">contact</h3>
                <h3 class="navbar-option">resume</h3>
            </div>
        </div>

        <div class="canvas-container" style="overflow: hidden">
            <canvas id="canvas"></canvas>
            <div class="canvas-header-container">
                <h1 class="header-title">
                    projects
                    <span class="header-subtitle">
                        things <br/>
                        that blink, breathe, <br/>
                        wiggle and drive
                    </span>
                </h1>
            </div>
        </div>
        <div class="content" style="height: auto">
            <h4 style="display: none"><span id="bg-name"></span> <span id="bg-info"></span></h4>
            <div class="vae-widget" style="">
                <div class="vae-widget-leftbar">
                    <div class="vae-widget-leftbar-pca-container">
                    </div>
                    <!-- <div class="vae-widget-leftbar-preset-grid">
                        <div class="vae-widget-preset"></div>
                    </div> -->
                </div>
                
                <div class="vae-widget-mix-container">
                    <div class="vae-widget-mix-box">
                        <input class="vae-widget-mix-slider" oninput="mix(parseFloat(this.value))" type="range" />
                        <div class="vae-widget-mix-preset-container" style="position: relative;">
                            <img draggable="false" class="vae-widget-mix-preset" src="https://via.placeholder.com/300/fff/d1dce3?text=1">
                                <button style="left:1px;top:2.4px;" onclick="load(0)"><img src="./assets/imgs/icons/up.png"/></button>
                                <button style="left:1px;top:24px;" onclick="save(0)"><img src="./assets/imgs/icons/save.png"/></button>
                            </img>
                            <img draggable="false" class="vae-widget-mix-preset" style="padding: 0;" src="https://via.placeholder.com/300/fff/d1dce3?text=2">
                                <button style="left:1px;top:calc(10vw + 5px)" onclick="load(1)"><img src="./assets/imgs/icons/up.png"/></button>
                                <button style="left:1px;top:calc(10vw + 27px)" onclick="save(1)"><img src="./assets/imgs/icons/save.png"/></button>
                            </img>
                        </div>
                    </div>
                </div>
                
                <div class="vae-widget-output-container" style="position:relative;">
                    <canvas id="vae-output-canvas" class="vae-widget-output" src="https://via.placeholder.com/300">
                        
                    </canvas>
                    <button style="position:absolute; top:2px; left: 2px;" onclick="
                        for (var i = 0; i < sliders.length; i++) {
                            sliders[i].value = (Math.random()-.5) * std[i] * 1.4;
                        }
                        decodeCurrent()
                    "><img src="./assets/imgs/icons/dice.png"/></button>
                </div>
                <script src="./js/tf.js"></script> 

                <script type="text/javascript">
                    const size = 32;
                    const scale = 1;
                    const vaeCanvas = document.getElementById("vae-output-canvas");
                    vaeCanvas.width = size * scale;
                    vaeCanvas.height = size * scale;
                    const vaeCTX = vaeCanvas.getContext('2d');
                    var decoder;
                    const sliderCount = 20;
                    const range = 80;
                    const mean = [-1.672, 0.057, -1.77, 1.74, 2.272, 2.68, -1.514, 1.582, 1.895, 1.776, -1.223, -3.493, -1.643, 0.426, 1.264, 2.176, -0.518, -2.646, 0.727, -2.826]
                    const std = [3.072, 3.645, 1.893, 3.574, 3.428, 2.77, 2.29, 2.223, 2.766, 2.023, 2.094, 1.644, 3.381, 2.503, 3.565, 3.902, 4.477, 3.236, 2.659, 2.332]

                    let sliders = [];
                    let saved = [[new Array(sliderCount).fill(-1)], [new Array(sliderCount).fill(1)]];
                    async function loadModel() {
                        decoder = await tf.loadLayersModel('./models/faces/decoder/model.json');
                        console.log("Model Loaded");

                        let sliderContainer = document.getElementsByClassName("vae-widget-leftbar-pca-container")[0];
                        for (var i = 0; i < sliderCount; i++) {
                            var div = document.createElement('div');
                            div.innerHTML = `<input id="pca${i+1}" class="vae-widget-pca" type="range" min="-3" max="3" step="0.001" oninput="decodeCurrent()" />`;
                            let newSlider = sliderContainer.appendChild(div.children[0]);
                            newSlider.value = (Math.random()-.5) * std[i] * 1.4;
                        }
                        
                        sliders = [...document.getElementsByClassName("vae-widget-pca")]
                        setTimeout(tf.tidy(()=>{
                            decode(sliders.map(elem => {return elem != null ?  Math.random()-.5 : 0;}));
                            setTimeout(() => {
                                save(0)
                                save(1)
                            }, 10)
                        }), 10);
                    }
                    window.addEventListener('mousemove', (e) => { 
                        mx = (-e.clientX + window.innerWidth/2)/window.innerWidth;
                        my = (-e.clientY + window.innerHeight/2)/window.innerHeight; 
                    });

                    loadModel();

                    function drawFromRGB_imdata(arr, px, py) {
                        arr = arr[0]

                        var imgData = vaeCTX.createImageData(size * scale, size * scale);
                        for (var y = 0; y < size * scale; y+=scale)
                        {
                            for (var x = 0; x < size * scale; x+=scale)
                            {
                                var pixX = Math.round(x/scale)
                                var pixY = Math.round(y/scale)
                                for (var oy = 0; oy < scale; oy++) {
                                    for (var ox = 0; ox < scale; ox++) {
                                        imgData.data[(((y+oy)*scale * size) + x + ox)*4+0] = (arr[pixY][pixX][0] + 1.9) * 65
                                        imgData.data[(((y+oy)*scale * size) + x + ox)*4+1] = (arr[pixY][pixX][1] + 1.9) * 65
                                        imgData.data[(((y+oy)*scale * size) + x + ox)*4+2] = (arr[pixY][pixX][2] + 1.9) * 65
                                        imgData.data[(((y+oy)*scale * size) + x + ox)*4+3] = 255
                                    }
                                }
                            }
                        }

                        vaeCTX.putImageData(imgData, 0, 0)                
                    }

                    async function decode(dense, x, y) {
                        if (decoder !== undefined) {
                            var rgb = await decoder.predict(tf.tensor([dense])).array();
                            drawFromRGB_imdata(rgb, x, y);
                        }
                    }
                    
                    function decodeCurrent() {
                        setTimeout(tf.tidy(()=>{
                            decode(sliders.map(elem => parseFloat(elem.value)))
                        }), 10)
                    }

                    function save(index) {
                        saved[index] = sliders.map(elem => {return elem != null? parseFloat(elem.value) : 0;});
                        var dataURL = vaeCanvas.toDataURL();
                        document.getElementsByClassName("vae-widget-mix-preset")[index].src = dataURL;
                    }

                    function load(index) {
                        sliders.forEach((elem, i) => {
                            elem.value = saved[index][i];
                        });
                        decodeCurrent();
                    }


                    function mix(t) {
                        t/=100
                        sliders.forEach((elem, i) => {
                            a = saved[0][i];
                            b = saved[1][i];
                            elem.value = a * t + b * (1 - t);
                        });
                        decodeCurrent();
                    }
                </script>
            </div>
            <div class="article" style="">
                <h1 class="article-header">header</h1>
                <p class="article-text">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Non curabitur gravida arcu ac. Consequat nisl vel pretium lectus quam id leo in vitae. In tellus integer feugiat scelerisque varius morbi enim. Nisl pretium fusce id velit ut tortor pretium viverra suspendisse. Phasellus faucibus scelerisque eleifend donec pretium vulputate sapien. Metus vulputate eu scelerisque felis imperdiet proin. Non enim praesent elementum facilisis leo vel fringilla. Lectus magna fringilla urna porttitor rhoncus dolor. Vestibulum mattis ullamcorper velit sed. Eu nisl nunc mi ipsum faucibus vitae aliquet. Tortor consequat id porta nibh venenatis cras sed. Proin sagittis nisl rhoncus mattis rhoncus urna neque viverra. Nullam eget felis eget nunc lobortis mattis aliquam faucibus.
                </p>
                <div class="article-gallery-container">
                    <div class="article-gallery">
                        <img src="https://via.placeholder.com/300"></img>
                        <img src="https://via.placeholder.com/200x100"></img>
                        <img src="https://via.placeholder.com/20"></img>
                    </div>
                    <p class="article-gallery-caption">This is a test caption. (above)</p>
                </div>
                <p class="article-text">
                    Lacus sed turpis tincidunt id aliquet risus. Praesent tristique magna sit amet purus gravida quis blandit. Massa tincidunt nunc pulvinar sapien. Pellentesque habitant morbi tristique senectus et netus et. Est velit egestas dui id ornare arcu. Dictumst quisque sagittis purus sit amet volutpat consequat. Massa sapien faucibus et molestie ac feugiat sed lectus. Quam vulputate dignissim suspendisse in est ante in nibh mauris. Pretium nibh ipsum consequat nisl vel. Laoreet suspendisse interdum consectetur libero id faucibus nisl tincidunt. Varius duis at consectetur lorem donec. Cras adipiscing enim eu turpis egestas pretium aenean. Viverra orci sagittis eu volutpat. Lorem dolor sed viverra ipsum nunc. Enim blandit volutpat maecenas volutpat blandit aliquam etiam erat velit. Libero enim sed faucibus turpis in eu mi bibendum. Neque vitae tempus quam pellentesque nec nam aliquam sem et. Cras sed felis eget velit aliquet sagittis id consectetur purus. Sed turpis tincidunt id aliquet. Purus faucibus ornare suspendisse sed nisi lacus sed viverra tellus.
                </p>
            </div>
            <!-- <div style="display: table; height: auto; width:100%;">
                <img style="aspect-ratio: 4/3; object-fit: cover;float:right;width:40%;filter:brightness(.85) contrast(1.7);" src="assets/imgs/frc/frc2020_offseason_bot.PNG" >
                <img style="aspect-ratio: 4/3; object-fit: cover;float:left; width:40%;filter:brightness(.85) contrast(1.7);" src="assets/imgs/frc/frc2020_bot.PNG" >
            </div>
            <div style="display: table; height: auto; width:100%; margin-top: 2em">
                <img style="aspect-ratio: 4/3; object-fit: cover;float:right;width:40%;filter:brightness(.85) contrast(1.7);" src="assets/imgs/frc/drivebase.PNG" >
                <img style="aspect-ratio: 4/3; object-fit: cover;float:left; width:40%;filter:brightness(.85) contrast(1.7);" src="assets/imgs/frc/small_bot.PNG" >
            </div> -->
            
            <!-- <div style="padding: 4em;">
                <p class="bold">
                    PERSONAL PROJECTS <br/>
                </p>
                <ul>
                    <li> <span class="gray">SPLmatic</span>: An antweight combat robot with a horizontal spinner. </li>
                    <li> <a class="gray" target="_blank" href="https://aaa-trsh.itch.io/rl-snakes">Auto Snakes</a>: A game of snake that uses Q-learning to control snake behavior. Also includes an AI snake bossfight for the fun of it. </li>
                    <li> <span class="gray">Yearbook VAE</span>: An autoencoder that reconstructs faces from my highschool yearbook. </li>
                    <li> <span class="gray">WFC Labs</span>: A procedurally generated martian lab that uses marching cubes and wave function collapse to generate the environment. </li>
                    <li> <a class="gray" target="_blank" href="./planet.html">GLSL Planet</a>: [WARNING: SLOW] A stylized planet that is entirely made with GLSL shaders.  </li>
                    <li> <span class="gray">Various Game Jam Submissions</span>:  
                        <table>
                            <tr>
                                <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/wormholes-n-chill">Brackeys 2020.1</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/please-stand-by">GMTK 2020</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://globalgamejam.org/2020/games/repair-game-4">GGJ 2020</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/tactical-bodybuilding">Ludum Dare 45 (2019)</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/groupthink">GGJ Next 2019</a></td>
                                <td><a class="white" target="_blank" href="https://globalgamejam.org/2019/games/how-our-mission-ended">GGJ 2019</a>&emsp;</td>
                            </tr>
                            <tr>
                                <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/the-globenhausser-legacy">ShenaniJam 2019</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://joathrentstudios.itch.io/flamey-boi-shenanijam-2018">ShenaniJam 2018</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://joathrentstudios.itch.io/grid-gunner">Ludum Dare 41 (2018)</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://globalgamejam.org/2018/games/target-discharge">GGJ 2018</a>&emsp;</td>
                                <td><a class="white" target="_blank" href="https://joathrentstudios.itch.io/batteries-sold-separately">Ludum Dare 39 (2017)</a>&emsp;</td>
                            </tr>
                        </table>
                    </li>
                </ul>
            </div> -->
            
        </div>
        <script src="./js/backgrounds/bg-cellular-automata.js"></script>
        <!-- <div id="terminal">
            <p>
                <span class="yellow bold">keithb@pc</span>:<span class="blue">~</span>$ info <br/>
                <br/>
                KEITH B (aka aaa-trash, AAAAAAAA) <span style="float: right">(279)-333-9755 - keith.ty.bartlett@gmail.com </span> <br/>
                I make software! <br/>
                <br/>
                <br/>
                <span class="bold">EXPERIENCE</span><br/>
                <ul>
                    <li>
                        Chatter.dev CNC / FTR - 1.5 YEARS <i>(present)</i>
                        <ul>
                            <li> Working on systems that understand machine behavior through minimal information, quantifying delays, and separatating unexpected downtime from scheduled maintenance.</li>
                            <li> Also worked on showing these statistics based on that behaviour to the end user.</li>
                        </ul>
                    </li>
                    <li>&nbsp;</li>
                    <li>
                        Joathrent Studios - 4 YEARS<br/>
                        <ul>
                            <li> <a class="gray" target="_blank" href="https://play.google.com/store/apps/details?id=com.JoathrentStudios.DustAndDiamonds&hl=en">DUST AND DIAMONDS</a>: A match 3 mobile idle game. Developed core gameplay systems such as progression, levelling, upgrades, etc.</li>
                            <li> <a class="gray" target="_blank" href="https://play.google.com/store/apps/details?id=com.JoathrentStudios.FlameyBoiFull&hl=en">FLAMEY BOI</a>: Created main movement and floor detection system. Also worked on the item shop and dynamic enemy navigation.</li>
                            <li> <a class="gray" target="_blank" href="https://play.google.com/store/apps/details?id=com.JoathrentStudios.GridGunner&hl=en_US">GRID GUNNER</a>: Developed movement and object management system for keeping track of bullets and enemies. Also worked on audio integration.</li>
                            <li> <span class="gray">HAUNTED QUEST</span>: Worked on tracking player save data, animation management, and UI events. This project was released, but taken down due to expenses.</li>
                        </ul>
                    </li>
                </ul>
            </p>
            <br/>
            <br/>
            <p class="bold">
                PERSONAL PROJECTS <br/>
            </p>
            <ul>
                <li> <span class="gray">SPLmatic</span>: An antweight combat robot with a horizontal spinner. </li>
                <li> <a class="gray" target="_blank" href="https://aaa-trsh.itch.io/rl-snakes">Auto Snakes</a>: A game of snake that uses Q-learning to control snake behavior. Also includes an AI snake bossfight for the fun of it. </li>
                <li> <span class="gray">Yearbook VAE</span>: An autoencoder that reconstructs faces from my highschool yearbook. </li>
                <li> <span class="gray">WFC Labs</span>: A procedurally generated martian lab that uses marching cubes and wave function collapse to generate the environment. </li>
                <li> <a class="gray" target="_blank" href="./planet.html">GLSL Planet</a>: [WARNING: SLOW] A stylized planet that is entirely made with GLSL shaders.  </li>
                <li> <span class="gray">Various Game Jam Submissions</span>:  
                    <table>
                        <tr>
                            <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/wormholes-n-chill">Brackeys 2020.1</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/please-stand-by">GMTK 2020</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://globalgamejam.org/2020/games/repair-game-4">GGJ 2020</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/tactical-bodybuilding">Ludum Dare 45 (2019)</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/groupthink">GGJ Next 2019</a></td>
                            <td><a class="white" target="_blank" href="https://globalgamejam.org/2019/games/how-our-mission-ended">GGJ 2019</a>&emsp;</td>
                        </tr>
                        <tr>
                            <td><a class="white" target="_blank" href="https://aaa-trsh.itch.io/the-globenhausser-legacy">ShenaniJam 2019</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://joathrentstudios.itch.io/flamey-boi-shenanijam-2018">ShenaniJam 2018</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://joathrentstudios.itch.io/grid-gunner">Ludum Dare 41 (2018)</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://globalgamejam.org/2018/games/target-discharge">GGJ 2018</a>&emsp;</td>
                            <td><a class="white" target="_blank" href="https://joathrentstudios.itch.io/batteries-sold-separately">Ludum Dare 39 (2017)</a>&emsp;</td>
                        </tr>
                    </table>
                </li>
            </ul>
            <p>
                <br/>
                <br/>
                <br/>
                <span class="yellow bold">keithb@pc</span>:<span class="blue">~</span>$ <span id="fake-cursor">&nbsp;</span> <br/>
            </p>
            <div style="position: absolute;top:12px; right:55px; border-bottom: 2px solid white; width: 10px; height: 6px;"></div>
            <div style="position: absolute;top:12px; right:32px; border: 1px solid white; border-top-width: 3px; border-radius: 2px; width: 10px; height: 6px;"></div>
            <p style="pointer-events: none; position: absolute;top:5px; right:10px; transform: rotateZ(45deg); font-size: 20px;">+</p>
        </div> -->
    </body>
</html>