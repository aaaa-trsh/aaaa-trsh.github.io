<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Keith's Portfolio</title>
    <link rel="icon" href="./images/icon.png">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@200;300;400;500;700&display=swap" rel="stylesheet">

</head>
    <body>
        <div id="header">
            <div id="header__title-container"><h1 id="header__title">keith bartlett</h1></div>
            <div id="header__subtitle-container"><h3 id="header__subtitle"><i>i make games, control systems, and software experiments</i></h3></div>
            <img id="header__image" src="./images/robotTransparent.png" draggable="false" />
            <!--<div style="font-weight:100; width:80vw; margin:0 auto; text-align:left; padding-top:1em;">
                <button>[home]</button>
                <button>[about me]</button>
                <button>[projects]</button>
                <button>[contact]</button>
            </div>-->
        </div>
        <div id="app" style="text-align: center;position: relative; width:100vw; margin:0; padding:0px;">
            <div id="projects-container" style="margin:0 auto; padding:0; width:100vw;">
                <div id="project-header-container">
                    <h1 id="project-header">
                        <span class="underline">projects: &emsp;</span>
                        <a class="project-header__button" v-on:click="filter='other'" v-bind:id="filter=='other'?'selected':''">other <span class="accent"></span></a>
                        <a class="project-header__button" v-on:click="filter='ml'" v-bind:id="filter=='ml'?'selected':''">ml <span class="accent">/&nbsp;</span></a>
                        <a class="project-header__button" v-on:click="filter='robotics'" v-bind:id="filter=='robotics'?'selected':''">robotics <span class="accent">/&nbsp;</span></a>
                        <a class="project-header__button" v-on:click="filter='game'" v-bind:id="filter=='game'?'selected':''">games <span class="accent">/&nbsp;</span></a>
                        <a class="project-header__button" v-on:click="filter='all'" v-bind:id="filter=='all'?'selected':''">all <span class="accent">/&nbsp;</span></a>
                    </h1>
                </div>
                <div id="project-header-mini-container">
                    <h1 id="project-header-mini" class="underline">projects:</h1>
                    <div>
                        <a class="project-header__button-mini" v-on:click="filter='all'" v-bind:id="filter=='all'?'selected':''">all</a>
                        <a class="project-header__button-mini" v-on:click="filter='game'" v-bind:id="filter=='game'?'selected':''">games</a>
                        <a class="project-header__button-mini" v-on:click="filter='robotics'" v-bind:id="filter=='robotics'?'selected':''">robotics</a>
                        <a class="project-header__button-mini" v-on:click="filter='ml'" v-bind:id="filter=='ml'?'selected':''">ml</a>
                    </div>
                </div>
                <div id="project-grid">
                    <project-card v-for="(project, id) in filteredProjects" v-bind:project="project" v-bind:id="id" v-on:click="overlayEnabled=true" />
                </div>
            </div>
        </div>
        <script>
            // Load projects from JSON
            var projects = (function () {
                var json = null;
                $.ajax({
                    'async': false,
                    'global': false,
                    'url': "./projects.json",
                    'dataType': "json",
                    'success': function (data) {
                        json = data;
                    }
                });
                return json;
            })();
            Vue.component('project-card', {
                props: ['project', 'id'],
                template:
                        `
                        <div class="project-card">
                            <a v-bind:href="project.link"><img v-bind:src="project.image" v-bind:title="project.title" class="project-card__image" draggable="false"></a>
                            <div class="project-card__text">  
                                <h3 class="project-card__title">{{id}}</h3>
                                <h4 class="project-card__description">{{project.description}}</h4>
                            </div>
                        </div>
                        `
            })
            var app = new Vue({
                el: '#app',
                data: {
                    projects: projects,
                    filter: "all",
                },
                computed: {
                    filteredProjects: function () {
                        if (this.filter == "all") { return projects; }
                        else {
                            result = {}
                            Object.keys(this.projects).forEach(key => {
                                const project = this.projects[key];
                                if (project.tag == this.filter) {
                                    result[key] = project
                                }
                            });

                            return result
                        }
                    }
                },
                methods: {
                }
            })
        </script>
    </body>
</html>